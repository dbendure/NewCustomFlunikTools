city (){//not sure if this would work
	for(var nCity in ClientLib.Data.MainData.GetInstance().get_Cities().get_AllCities().d){
		var city = ClientLib.Data.MainData.GetInstance().get_Cities().get_AllCities().d[nCity];
		return city;
	}
}
building(){//not sure if this would work
	var buildings = this.city.get_Buildings();
	for (var nBuildings in buildings.d) {
		var building = buildings.d[nBuildings];
		return building;
	}
}
Complicated_logic(modType, linkType){
	if(modType == && linkType){
		
	}
}
BuildingautoUpgrade() {
    foreach (this.city) { //here you could use "this.city[city_id]" since city_id is really what nCity is. 
        foreach (this.building) {//here you could use "this.building[building_id]" since building_id is really what nBuildings is.
            switch (tech) {
            case Factory:
            case Barracks:
            case Airport:
                // Is this building's RT the highest RT?
                break;
            case ConstructionYard:
            case CommandCenter:
            case DefenseFacility:
            case DeenseHQ:
            case Support_Air:
            case Support_Ion:
            case Support_Art:
                // What is this building's target level?
                //  CY >= baseLevel
                //  CC >= offenseLevel
                //  DF >= defenseLevel + 3
                //  DHQ >= defenseLevel
                //  Support_Air >= defenseLevel + 3
                //  Support_Ion >= defenseLevel + 3
                //  Support_Art >= defenseLevel + 3
                break;
            case Refinery: // TODO: Can all these production buildings be combined into a single set of logic?
                if (building_level <= 2) {
                    // upgrade it
                } else {
                    // Complicated_logic(modType, linkType)
                }
                break;
            case Harvester:
                if (building_level <= 2) {
                    // upgrade it
                } else {
                    // Complicated_logic(modType, linkType)
                }
                break;
            case PowerPlant:
                if (building_level <= 2) {
                    // upgrade it
                } else {
                    // Complicated_logic(building_ID, modType, linkType)
                }
                break;
            }
        }

        var obj = null;
        if (offense_obj != null) {
            obj = offense_obj;
        } else if (city_obj != null) {
            obj = city_obj;
        } else if (production_obj != null) {
            obj = production_obj;
        }

        if (obj != null) {
            upgradeBuilding(obj);
        }
    }
}
